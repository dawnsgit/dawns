<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Cart Detail</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card [hidden]="!showEmptyCartMessage">
    <ion-grid>
      <ion-row>
        <ion-col><h3>There are no products in your cart!</h3></ion-col>
        
      </ion-row>
      <ion-row>
        <ion-button (click)="shop()">Shop Now</ion-button>
      </ion-row>
    </ion-grid>
  </ion-card>

  <div style="padding: 1px;">
    <table class="data">
      <tr *ngFor="let product of cartValue; let i=index">
        <th ><img src="https://rbtech.in/GOODLUCK/{{product.image_small}}" style="border-radius: 5px;width: 158px;" /></th>
        <th>
          <h6><b>{{product.ProductName}}</b></h6>
          <p style="margin-bottom: 0.2rem;">Price:&#8377;{{product.Total_val_enc}}</p>
          <p>Qty:{{product.qty}}&nbsp;{{product.unit}}</p>
        </th>
        <th>
          <h5>
            <ion-icon name="trash-outline" style="font-size: 1.1rem;color: red;" (click)="removeFromCart(product,i)"></ion-icon>
          </h5>
          <ion-icon name="pencil-outline" style="font-size: 1.1rem;color: green;"  (click)="editCartProduct(product.product.PID)"></ion-icon>
        </th>
      </tr>
    </table>
  </div>
 
  <ion-card class="coupan" *ngIf='!applied'>
    <form  #myForm="ngForm">
      <div class="form-group">
        <label for="email">Apply Coupan Code?</label>
        <input type="text" class="form-control" placeholder="Enter code here" id="firstname" (keyup)="onKey($event)" required [(ngModel)]="firstname" name="firstname">
      </div>
      <button type="submit" class="btn btn-primary"  [disabled]="!myForm.form.valid" (click)="applyCoupan(item)">Apply</button>
      <!-- <button type="submit" class="btn btn-primary"  (click)="addToCart(item)">Remove</button> -->
    </form>
  </ion-card>

  <div style="padding: 5px;background: rgb(240, 244, 245);border-radius: 5px;" [hidden]="showEmptyCartMessage">
    <h6><b>Price Details</b></h6>
    <ion-row>
      <ion-col class="ion-text-left">
        Price({{lengthItem}} item)
      </ion-col>

      <ion-col class="ion-text-right">
        &#8377;{{total}}
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col class="ion-text-left">
        Delivery Chages
      </ion-col>

      <ion-col class="ion-text-right">
        Free
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col class="ion-text-left">
        <b> Amount Payble</b>
      </ion-col>

      <ion-col class="ion-text-right">
        <b>&#8377;{{total}}</b>
      </ion-col>
    </ion-row>
  </div>
</ion-content>
<ion-footer [hidden]="showEmptyCartMessage">
  <ion-toolbar>
    <ion-grid>
      <ion-row>
        <ion-col class="ion-text-center">
          <ion-button shape="round" [routerLink]="'/checkout/'" routerDirection="forward">Continue</ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-footer>